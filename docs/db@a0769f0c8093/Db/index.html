<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Db (db@a0769f0c8093.Db)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">db@a0769f0c8093</a> &#x00BB; Db</nav><header class="odoc-preamble"><h1>Module <code><span>Db</span></code></h1></header><div class="odoc-content"><p>Module <code>Db</code> regroups all the DB requests divided into module for every handler. Request are sended to PostgreSQL database. Every function that is supposed to be an handler's entry point catches PostgreSQL errors with <code>Misc_db.catch_db_error</code>. Functions use ```pgocaml_ppx``` that defines special syntax for SQL requests.</p><div class="odoc-spec"><div class="spec value" id="val-get_opam_by_name" class="anchored"><a href="#val-get_opam_by_name" class="anchor"></a><code><span><span class="keyword">val</span> get_opam_by_name : <span><span><span><span>(string, bool)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <a href="../Db_lwt/PGOCaml/index.html#type-t">Db_lwt.PGOCaml.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; opam_name : string; opam_version : string; &gt;</span> list</span> <a href="../Db_lwt/PGOCaml/index.html#type-monad">Db_lwt.PGOCaml.monad</a></span></span></code></div><div class="spec-doc"><p>Get package row from DB that has specified name.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_mdl_by_id" class="anchored"><a href="#val-get_mdl_by_id" class="anchor"></a><code><span><span class="keyword">val</span> get_mdl_by_id : <span><span><span><span>(string, bool)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <a href="../Db_lwt/PGOCaml/index.html#type-t">Db_lwt.PGOCaml.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; mdl_id : int32; mdl_name : string; mdl_opam : string; mdl_path : string; &gt;</span> list</span> <a href="../Db_lwt/PGOCaml/index.html#type-monad">Db_lwt.PGOCaml.monad</a></span></span></code></div><div class="spec-doc"><p>Get module row from DB that has specified id.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_libs_by_mdl_id" class="anchored"><a href="#val-get_libs_by_mdl_id" class="anchor"></a><code><span><span class="keyword">val</span> get_libs_by_mdl_id : <span><span><span><span>(string, bool)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <a href="../Db_lwt/PGOCaml/index.html#type-t">Db_lwt.PGOCaml.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; mdl_lib : string; &gt;</span> list</span> <a href="../Db_lwt/PGOCaml/index.html#type-monad">Db_lwt.PGOCaml.monad</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_mdls_by_name" class="anchored"><a href="#val-get_mdls_by_name" class="anchor"></a><code><span><span class="keyword">val</span> get_mdls_by_name : <span><span><span><span>(string, bool)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <a href="../Db_lwt/PGOCaml/index.html#type-t">Db_lwt.PGOCaml.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; mdl_name : string; mdl_opam : string; &gt;</span> list</span> <a href="../Db_lwt/PGOCaml/index.html#type-monad">Db_lwt.PGOCaml.monad</a></span></span></code></div><div class="spec-doc"><p>Get module rows by module name</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Entries" class="anchored"><a href="#module-Entries" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Entries/index.html">Entries</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module that regroups all DB requests for <code>Handlers.entries</code> handler.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Elements" class="anchored"><a href="#module-Elements" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Elements/index.html">Elements</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module that regroups all DB requests for <code>Handlers.elements</code> handler.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Commands" class="anchored"><a href="#module-Commands" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Commands/index.html">Commands</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module that regroups all DB requests for <code>Handlers.exec_command</code> handler.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Search" class="anchored"><a href="#module-Search" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Search/index.html">Search</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module that regroups all DB requests for <code>Handlers.search</code> handler.</p></div></div></div></body></html>