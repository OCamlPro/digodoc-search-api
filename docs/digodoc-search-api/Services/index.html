<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Services (digodoc-search-api.Services)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">digodoc-search-api</a> &#x00BB; Services</nav><header class="odoc-preamble"><h1>Module <code><span>Services</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#sections">Sections</a></li><li><a href="#service-arguments">Service arguments</a></li><li><a href="#service-errors">Service errors</a></li><li><a href="#services">Services</a></li></ul></nav><div class="odoc-content"><p>Module <code>Services</code> defines all the services with their arguments, results and errors JSON encodings.</p><h2 id="sections"><a href="#sections" class="anchor"></a>Sections</h2><div class="odoc-spec"><div class="spec value" id="val-section_entries" class="anchored"><a href="#val-section_entries" class="anchor"></a><code><span><span class="keyword">val</span> section_entries : <span class="xref-unresolved">EzAPI</span>.Doc.section</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-section_elements" class="anchored"><a href="#val-section_elements" class="anchor"></a><code><span><span class="keyword">val</span> section_elements : <span class="xref-unresolved">EzAPI</span>.Doc.section</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-section_commands" class="anchored"><a href="#val-section_commands" class="anchor"></a><code><span><span class="keyword">val</span> section_commands : <span class="xref-unresolved">EzAPI</span>.Doc.section</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-section_search" class="anchored"><a href="#val-section_search" class="anchor"></a><code><span><span class="keyword">val</span> section_search : <span class="xref-unresolved">EzAPI</span>.Doc.section</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sections" class="anchored"><a href="#val-sections" class="anchor"></a><code><span><span class="keyword">val</span> sections : <span><span class="xref-unresolved">EzAPI</span>.Doc.section list</span></span></code></div><div class="spec-doc"><p>All documentation sections. Every service should be associated to one of them in order to appear in API documentation.</p></div></div><h2 id="service-arguments"><a href="#service-arguments" class="anchor"></a>Service arguments</h2><div class="odoc-spec"><div class="spec module" id="module-Args" class="anchored"><a href="#module-Args" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Args/index.html">Args</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module that unions all service arguments. Argument is created with <code>EzAPI.Arg</code> module</p></div></div><h2 id="service-errors"><a href="#service-errors" class="anchor"></a>Service errors</h2><div class="odoc-spec"><div class="spec module" id="module-Errors" class="anchored"><a href="#module-Errors" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Errors/index.html">Errors</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Server errors</p></div></div><h2 id="services"><a href="#services" class="anchor"></a>Services</h2><div class="odoc-spec"><div class="spec value" id="val-entries" class="anchored"><a href="#val-entries" class="anchor"></a><code><span><span class="keyword">val</span> entries : <span><span>(<a href="../Data_types/index.html#type-entry_info">Data_types.entry_info</a>, <a href="../Data_types/index.html#type-entries">Data_types.entries</a>, <a href="../Data_types/index.html#type-server_error_type">Data_types.server_error_type</a>, <span class="xref-unresolved">EzAPI</span>.no_security)</span> <span class="xref-unresolved">EzAPI</span>.service1</span></span></code></div><div class="spec-doc"><p>Service that takes as argument <code>Data_types.entry_info</code> and returns 50 first results that fits to conditions specified in <code>entry_info</code>. Field <code>entry</code> precise type of entry (one of: packages, modules, libraries,...) to search. Field <code>pattern</code> is considered as case insensetive regex expression. Field <code>starts_with</code> contains another regex pattern that starts with &quot;^&quot; and precises the first letter of an entry. Field <code>last_id</code> precise previus index of the first entry from which it takes results. Could raise <code>Search_api_error Invalid_index</code> if <code>pattern</code> isn't a correct regex</p></div></div><div class="odoc-spec"><div class="spec value" id="val-elements" class="anchored"><a href="#val-elements" class="anchor"></a><code><span><span class="keyword">val</span> elements : <span><span>(<a href="../Data_types/index.html#type-element_info">Data_types.element_info</a>, <a href="../Data_types/index.html#type-ocaml_elements">Data_types.ocaml_elements</a>, <a href="../Data_types/index.html#type-server_error_type">Data_types.server_error_type</a>, <span class="xref-unresolved">EzAPI</span>.no_security)</span> <span class="xref-unresolved">EzAPI</span>.service1</span></span></code></div><div class="spec-doc"><p>Service that takes as argument <code>Data_types.element_info</code> and returns 50 first results that fits to conditions specified in <code>element_info</code>. Field <code>element</code> precise type of element (one of: types, values, classes ...) to search. Field <code>pattern</code> is considered as case insensetive regex expression if field <code>mode</code> is set to Regex. Otherwise it is *TODO: describe parsing of pattern in custom mode* . Field <code>conditions</code> lists all opam packages and modules where element search should take a place. Field <code>last_id</code> precise previus index of the first element from which it takes results. Could raise <code>Search_api_error Invalid_index</code> if <code>mode</code> is regex and <code>pattern</code> isn't a valid regex or if one of name of one of conditions isn't a correct regex.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-exec_command" class="anchored"><a href="#val-exec_command" class="anchor"></a><code><span><span class="keyword">val</span> exec_command : <span><span>(<a href="../Data_types/index.html#type-command">Data_types.command</a>, <a href="../Data_types/index.html#type-info">Data_types.info</a>, <a href="../Data_types/index.html#type-command_result">Data_types.command_result</a>, <a href="../Data_types/index.html#type-server_error_type">Data_types.server_error_type</a>, <span class="xref-unresolved">EzAPI</span>.no_security)</span> <span class="xref-unresolved">EzAPI</span>.service2</span></span></code></div><div class="spec-doc"><p>Service that executes one of predefined command which takes as argument <code>Data_types.info</code> that represents an information either about entry either about an element. Returns a <code>Data_types.command_result</code> representing result of the command. Could raise <code>Search_api_error Invalid_index</code> if <code>pattern</code> isn't a correct regex.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-search" class="anchored"><a href="#val-search" class="anchor"></a><code><span><span class="keyword">val</span> search : <span><span>(<a href="../Data_types/index.html#type-pattern">Data_types.pattern</a>, <a href="../Data_types/index.html#type-search_result">Data_types.search_result</a>, <a href="../Data_types/index.html#type-server_error_type">Data_types.server_error_type</a>, <span class="xref-unresolved">EzAPI</span>.no_security)</span> <span class="xref-unresolved">EzAPI</span>.service1</span></span></code></div><div class="spec-doc"><p>Service that takes a regex pattern in argument and returns <code>Data_types.search_result</code> that constains at most 10 entries. At contains at most 3 packages, at most 3 libraries and the rest of modules. Could raise <code>Search_api_error Invalid_index</code> if <code>pattern</code> isn't a correct regex</p></div></div></div></body></html>