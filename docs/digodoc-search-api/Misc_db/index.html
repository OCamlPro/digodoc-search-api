<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Misc_db (digodoc-search-api.Misc_db)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">digodoc-search-api</a> &#x00BB; Misc_db</nav><header class="odoc-preamble"><h1>Module <code><span>Misc_db</span></code></h1></header><div class="odoc-content"><p>Module that defines auxillary functions to :</p><ul><li>Catches DB errors and converts it to <code>Data_types.Search_api_error</code>.</li><li>Converts DB rows to a specific OCaml data structure.</li></ul><div class="odoc-spec"><div class="spec value" id="val-catch_db_error" class="anchored"><a href="#val-catch_db_error" class="anchor"></a><code><span><span class="keyword">val</span> catch_db_error : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Catches DB excetpions and raises <code>Data_types.Search_api_error</code> coresponding to DB error</p></div></div><div class="odoc-spec"><div class="spec value" id="val-path_of_opam" class="anchored"><a href="#val-path_of_opam" class="anchor"></a><code><span><span class="keyword">val</span> path_of_opam : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Computes path to package documentation</p></div></div><div class="odoc-spec"><div class="spec value" id="val-name_of_opam" class="anchored"><a href="#val-name_of_opam" class="anchor"></a><code><span><span class="keyword">val</span> name_of_opam : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Computes name of package</p></div></div><div class="odoc-spec"><div class="spec value" id="val-path_of_lib" class="anchored"><a href="#val-path_of_lib" class="anchor"></a><code><span><span class="keyword">val</span> path_of_lib : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Computes path to library documentation</p></div></div><div class="odoc-spec"><div class="spec value" id="val-path_of_meta" class="anchored"><a href="#val-path_of_meta" class="anchor"></a><code><span><span class="keyword">val</span> path_of_meta : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Computes path to meta documentation</p></div></div><div class="odoc-spec"><div class="spec value" id="val-path_of_src" class="anchored"><a href="#val-path_of_src" class="anchor"></a><code><span><span class="keyword">val</span> path_of_src : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Computes path to source explorer for a package</p></div></div><div class="odoc-spec"><div class="spec value" id="val-packages_of_rows" class="anchored"><a href="#val-packages_of_rows" class="anchor"></a><code><span><span class="keyword">val</span> packages_of_rows : <span><span><span>&lt; opam_name : string; opam_synopsis : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Data_types/index.html#type-opam_entry">Data_types.opam_entry</a> list</span></span></code></div><div class="spec-doc"><p>Creates <code>Data_types.packages</code> from DB rows</p></div></div><div class="odoc-spec"><div class="spec value" id="val-library_of_row" class="anchored"><a href="#val-library_of_row" class="anchor"></a><code><span><span class="keyword">val</span> library_of_row : <span><span>&lt; lib_name : string; .. &gt;</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; opam_name : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Data_types/index.html#type-lib_entry">Data_types.lib_entry</a></span></code></div><div class="spec-doc"><p>Creates <code>Data_types.lib_entry</code> from library and its package DB rows</p></div></div><div class="odoc-spec"><div class="spec value" id="val-meta_of_row" class="anchored"><a href="#val-meta_of_row" class="anchor"></a><code><span><span class="keyword">val</span> meta_of_row : <span><span>&lt; meta_name : string; .. &gt;</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; opam_name : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Data_types/index.html#type-meta_entry">Data_types.meta_entry</a></span></code></div><div class="spec-doc"><p>Creates <code>Data_types.meta_entry</code> from meta and its package DB rows</p></div></div><div class="odoc-spec"><div class="spec value" id="val-module_of_row" class="anchored"><a href="#val-module_of_row" class="anchor"></a><code><span><span class="keyword">val</span> module_of_row : <span><span>&lt; mdl_name : string; mdl_path : string; .. &gt;</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; opam_name : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; mdl_lib : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Data_types/index.html#type-module_entry">Data_types.module_entry</a></span></code></div><div class="spec-doc"><p>Creates <code>Data_types.module_entry</code> from module, its package and its libraries DB rows</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sources_of_rows" class="anchored"><a href="#val-sources_of_rows" class="anchor"></a><code><span><span class="keyword">val</span> sources_of_rows : <span><span><span>&lt; opam_name : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Data_types/index.html#type-sources">Data_types.sources</a></span></code></div><div class="spec-doc"><p>Creates <code>Data_types.sources</code> from DB rows</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Cond" class="anchored"><a href="#module-Cond" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Cond/index.html">Cond</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module <code>Cond</code> that regroups functions dealing with conditions send with <code>getElements</code> request. Actially there are only two conditions : one that describes either an element belongs to module with specified name, another that describes either an element belongs to specific package.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-val_of_row_opt" class="anchored"><a href="#val-val_of_row_opt" class="anchor"></a><code><span><span class="keyword">val</span> val_of_row_opt : <span><span>(<span><a href="Cond/index.html#type-opam_cond">Cond.opam_cond</a> list</span> * <span><a href="Cond/index.html#type-mdl_cond">Cond.mdl_cond</a> list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>&lt; mdl_ident : string; mdl_val : string; .. &gt;</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; opam_name : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; mdl_name : <span class="xref-unresolved">Stdlib</span>.String.t; mdl_path : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Data_types/index.html#type-val_element">Data_types.val_element</a> option</span></span></code></div><div class="spec-doc"><p><code>val_of_row_opt (in_packs,in_mdls) row opam_row mdl_row</code> returns Some of <code>Data_types.val_element</code> if value and its package and module DB rows respects one of condition in <code>in_packs</code> and <code>in_mdls</code> lists. Otherwise returns None.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-count_from_row" class="anchored"><a href="#val-count_from_row" class="anchor"></a><code><span><span class="keyword">val</span> count_from_row : <span><span><span>int64 option</span> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Extracts result of command 'count' from DB row</p></div></div><div class="odoc-spec"><div class="spec value" id="val-count_elements_in_rows" class="anchored"><a href="#val-count_elements_in_rows" class="anchor"></a><code><span><span class="keyword">val</span> count_elements_in_rows : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.String.t list</span> * <span><span>(<span class="xref-unresolved">Stdlib</span>.String.t * <span class="xref-unresolved">Stdlib</span>.String.t)</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; opam_name : string; opam_version : string; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>&lt; mdl_name : <span class="xref-unresolved">Stdlib</span>.String.t; .. &gt;</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>count_elements_in_rows (in_packs, in_mdls) opam_row mdl_row row cpt</code> increments counter <code>cpt</code> if value and its package and module DB rows respects one of condition in <code>in_packs</code> and <code>in_mdls</code> lists. Otherwise returns <code>cpt</code></p></div></div></div></body></html>